---
title: WebSocket和HTTP的区别
---

## WebSocket 与 HTTP 的主要区别

### 1. 连接特性

- **HTTP**：
  - 基于请求-响应模型的无状态协议
  - 每次通信都需要建立新的连接（HTTP/1.1支持持久连接，但仍需请求-响应模式）
  - 客户端发起请求，服务器响应后连接可能关闭

- **WebSocket**：
  - 全双工通信协议，建立一次连接后可双向通信
  - 连接一旦建立，客户端和服务器可以随时互相发送数据
  - 连接保持开放，直到一方主动关闭

### 2. 通信方式

- **HTTP**：
  - 单向通信：客户端 → 服务器
  - 服务器无法主动向客户端推送数据
  - 如需实时更新，需采用轮询或长轮询等方式

- **WebSocket**：
  - 双向通信：客户端 ↔ 服务器
  - 服务器可以主动推送数据到客户端
  - 实现真正的实时通信

### 3. 数据格式和开销

- **HTTP**：
  - 每次请求都包含完整的HTTP头部信息
  - 数据冗余较大，开销较高
  - 支持多种数据格式（JSON、XML、HTML等）

- **WebSocket**：
  - 建立连接后，数据传输开销小
  - 使用帧（frame）传输数据，头部信息精简
  - 二进制和文本数据都支持

### 4. 实时性

- **HTTP**：
  - 本质上是拉取模式，实时性较差
  - 轮询方式浪费资源且延迟高
  - 长轮询虽有改善但仍有局限

- **WebSocket**：
  - 推送模式，实时性极佳
  - 服务器数据变化可立即推送给客户端
  - 适用于聊天、游戏、实时数据展示等场景

### 5. 使用场景

- **HTTP 适用场景**：
  - 传统的网页浏览
  - RESTful API调用
  - 文件下载/上传
  - 不需要实时交互的应用

- **WebSocket 适用场景**：
  - 在线聊天应用
  - 实时游戏
  - 股票/数据实时更新
  - 协同编辑工具
  - 实时通知系统

### 6. 协议握手过程

- **HTTP**：
  - 直接建立TCP连接后发送请求
  - 无需特殊握手过程

- **WebSocket**：
  - 通过HTTP协议进行握手
  - 客户端发送`Upgrade: websocket`请求头
  - 服务器响应101状态码确认升级
  - 握手成功后切换到WebSocket协议

### 7. 浏览器兼容性

- **HTTP**：
  - 所有浏览器都支持
  - 是Web的基础协议

- **WebSocket**：
  - 现代浏览器支持良好
  - IE10及以上版本支持
  - 需要考虑降级方案

### 8. 错误处理和状态管理

- **HTTP**：
  - 丰富的状态码体系（2xx、3xx、4xx、5xx）
  - 每次请求独立处理错误

- **WebSocket**：
  - 错误处理相对简单
  - 需要自行实现连接状态管理
  - 需要考虑重连机制

总的来说，HTTP适用于传统的请求-响应场景，而WebSocket更适合需要实时双向通信的应用场景。两者各有优势，在现代Web开发中经常结合使用。