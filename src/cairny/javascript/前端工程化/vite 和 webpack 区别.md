---
title: vite 和 webpack 区别
---


##### 1. 核心设计理念
* **Webpack**
1. **基于打包器（Bundler）：** 将所有模块（JS、CSS、图片等）静态分析并打包成一个或多个 bundle 文件，通过依赖图（Dependency Graph）管理资源依赖。
2. **开发环境 vs 生产环境：** 开发时使用 Webpack Dev Server，依赖打包后的代码；生产环境需要预先构建（build）。
3. **插件和加载器（Loader）：** 通过丰富的插件（如 HtmlWebpackPlugin）和 Loader（如 babel-loader）处理各类资源。

**Vite**
1. **基于原生 ESM（ES Modules）：** 开发环境直接利用浏览器原生 ESM 能力，按需编译和请求文件，无需打包。
2. **开发与生产分离：**
   * 开发环境：使用原生 ESM + 按需编译（如通过 esbuild 转换依赖）。
   * 生产环境：使用 Rollup 进行全量打包（类似 Webpack）。
3. **快速启动：** 开发服务器秒级启动，热更新（HMR）效率极高。


##### 2. 构建速度对比
**开发环境**
* **Webpack：** 启动时需要构建完整的依赖图并打包所有资源，项目越大启动越慢（分钟级）。热更新需重新打包变动的模块。
* **Vite：** 启动时仅启动服务器，浏览器按需请求文件（毫秒级）。热更新仅编译当前文件，与项目规模无关。
**生产环境**
* **Webpack：** 成熟的打包优化（Tree Shaking、Code Splitting）。
* **Vite：** 使用 Rollup，打包效率与 Webpack 接近，但配置更简化。


##### 3. 工作流程差异
**Webpack 的工作流程**
1. 从入口文件开始，递归分析所有依赖。
2. 用 Loader 处理非 JS 资源（如 CSS、图片）。
3. 插件（Plugin）干预打包过程（如优化、压缩）。
4. 生成打包后的 bundle 文件。

**Vite 的工作流程（开发环境）**
1. 启动服务器，拦截浏览器对 .js 文件的请求。
2. 对 node_modules 中的依赖预构建（仅首次启动时）。
3. 源码文件按需编译（如 .vue 文件通过插件实时编译）。
4. 浏览器直接加载编译后的 ESM 模块。

##### 4. 功能支持
| 特性          | Webpack                      | Vite                          |
| ------------- | ---------------------------- | ----------------------------- |
| 模块化        | 支持 CommonJS/AMD/ESM        | 原生 ESM 优先                 |
| HMR（热更新） | 支持，但速度随项目增长下降   | 极快，基于 ESM 的精准更新     |
| TypeScript    | 需 ts-loader 或 babel-loader | 内置支持（通过 esbuild 转换） |
| CSS 处理      | 需 css-loader + style-loader | 原生支持，可直接导入 .css     |
| 框架支持      | 通过配置支持（如 Vue/React） | 内置优化（如 Vue 单文件组件） |
| 生产打包      | 自带优化（如代码分割）       | 依赖 Rollup，配置更简洁       |

##### 5. 配置复杂度
* **Webpack：** 配置复杂（如 webpack.config.js 可能长达数百行），需手动处理 Loader 和插件。
* **Vite：** 开箱即用，默认支持常见功能（如 CSS Modules、TS），配置简化（vite.config.js 通常仅需几十行）。

##### 6. 适用场景
**选择 Webpack 的情况：**
* 需要高度定制化构建流程（如特殊代码拆分规则）。
* 遗留项目依赖 CommonJS 或特殊 Webpack 插件。
* 需要稳定的生态（Webpack 插件超过 2 万个）。

**选择 Vite 的情况：**
* 新项目，尤其是基于现代框架（Vue/React/Svelte）。
* 追求极速的开发体验（如大型项目快速启动）。
* 希望简化配置，利用浏览器原生 ESM。

##### 7. 底层工具链
* **Webpack：** 自研核心，依赖 Babel 等传统工具。
* **Vite：**
  * 开发环境：esbuild（Go 语言编写，比 Babel 快 10-100 倍）。
  * 生产环境：Rollup（打包优化更专注 ESM）。

##### 8. 生态与社区
* **Webpack：** 成熟（2012 年发布），插件生态极其丰富，但学习曲线陡峭。
* **Vite：** 新兴（2021 年发布），生态快速增长，兼容部分 Rollup 插件，更轻量。

##### 总结
| 维度         | Webpack                | Vite                     |
|--------------|------------------------|--------------------------|
| **核心思想** | 静态打包               | 原生 ESM + 按需编译       |
| **开发速度** | 慢（全量打包）         | 极快（按需编译）          |
| **生产打包** | 成熟优化               | Rollup 打包，简洁高效     |
| **配置复杂度** | 高                    | 低                       |
| **适用项目** | 复杂、历史项目         | 现代框架、新项目          |

##### 建议：
* 大型传统项目或需要深度定制时选 Webpack。
* 追求开发效率或新项目优先选 Vite。

